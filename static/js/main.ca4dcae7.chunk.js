(this.webpackJsonppiano=this.webpackJsonppiano||[]).push([[0],{27:function(e,t,n){e.exports=n(80)},32:function(e,t,n){},33:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),c=n(24),s=n.n(c),i=(n(32),{});!function e(){console.log("connectring"),(a=new WebSocket("wss://piano.lan:8080")).onmessage=function(e){var t=JSON.parse(e.data);i[t.name]&&i[t.name].forEach((function(e){e(t.data)}))},a.onclose=function(t){console.log("connection closed"),setTimeout(e,1e3)},a.onerror=function(e){console.log("connection errored")}}();var l={socket:a,on:function(e,t){i[e]=t[e]||[],i[e].push(t)}},u=r.a.createContext(l),m=function(e){var t=e.children;return r.a.createElement(u.Provider,{value:l},t)},p=n(26);n(33);var f=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],v=function(e){return{key:e,note:f[e%12],noteName:f[e%12].substr(0,1),oct:Math.ceil((e+1)/12),isSharp:[1,3,6,8,10].includes(e%12)}},d=[{label:"major",steps:[0,4,7]},{label:"minor",steps:[0,3,7]},{label:"dim",steps:[0,3,6],rootOnly:!0},{label:"aug",steps:[0,4,8],rootOnly:!0},{label:"7",steps:[0,4,7,10]},{label:"minor 7",steps:[0,3,7,10]},{label:"maj7",steps:[0,4,7,11]},{label:"minor maj7",steps:[0,3,7,11]}],h={};f.forEach((function(e,t){d.forEach((function(n){for(var a=0;a<n.steps.length;a++){for(var o=[],r=0;r<n.steps.length;r++)o.push(f[(t+n.steps[(a+r)%n.steps.length])%12]);if(h[o.join()]&&console.log("CLASH",n.label,h[o.join()].type),h[o.join()]={base:e,type:n.label},n.rootOnly)break}}))}));var y=function(e){var t=Array.from(new Set(e.map((function(e){return e%12})))).map((function(e){return f[e]})).join();return h[t]};function E(){var e=function(e,t){var n=Object(o.useState)(t),a=Object(p.a)(n,2),r=a[0],c=a[1];return Object(o.useContext)(u).on("state-".concat(e),(function(e){c(e)})),r}("keys",{}),t={},n=[],a=Object.keys(e).map((function(e){return t[~~e]=!0,n.push(~~e),v(~~e)})),r=y(n);return{keys:a,map:t,ids:n,chord:r}}var b=function(e){var t=e.pressed,n=e.start,a=e.octaves,o=e.showNotes;function c(e){return o?f[e%12]:"\u2b24"}for(var s=[],i=n;i<a;i++)for(var l=12*i;l<12*i+12;l++)l%12===0||l%12===5?s.push(r.a.createElement("div",{key:"group-".concat(l),className:"group"},r.a.createElement("div",{className:"anchor ".concat(t[l]?"active":"")},r.a.createElement("div",{className:"indicator"},c(l))))):(s.push(r.a.createElement("div",{key:"group-".concat(l),className:"group"},r.a.createElement("div",{className:"black ".concat(t[l]?"active":"")},r.a.createElement("div",{className:"indicator"},c(l))),r.a.createElement("div",{className:"anchor ".concat(t[l+1]?"active":"")},r.a.createElement("div",{className:"indicator"},c(l+1))))),l++);return r.a.createElement("div",{id:"piano-wrapper"},r.a.createElement("div",{id:"piano"},s))},g=n(25),k=n.n(g),w=(n(79),function(e){var t={3:{sym:",",form:String.prototype.toUpperCase},4:{sym:"",form:String.prototype.toUpperCase},5:{sym:"",form:String.prototype.toLowerCase},6:{sym:"'",form:String.prototype.toLowerCase}};return e.oct<3||e.oct>6?"":(e.isSharp?"^":"")+t[e.oct].form.call(e.noteName)+t[e.oct].sym});function j(e){var t=e.keys,n=Object(o.createRef)();return Object(o.useEffect)((function(){if(n.current){var e="M:C\n    ["+t.map(w).join("")+"]";k.a.renderAbc("vex",e,{})}}),[n]),r.a.createElement("div",{id:"vex",style:{justifyContent:"center",display:"inline-flex"},ref:n})}function N(){var e=E(),t=e.keys,n=e.map,a=e.chord;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chord"},r.a.createElement("h2",null,a&&r.a.createElement(r.a.Fragment,null,a.base," ",a.type))),r.a.createElement(b,{pressed:n,start:1,octaves:5,showNotes:!0}),r.a.createElement(j,{keys:t}))}var C=function(){return r.a.createElement(m,null,r.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.ca4dcae7.chunk.js.map