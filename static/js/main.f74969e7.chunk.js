(this.webpackJsonppiano=this.webpackJsonppiano||[]).push([[0],{27:function(e,t,a){e.exports=a(80)},32:function(e,t,a){},33:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),c=a.n(o),s=(a(32),new WebSocket("ws://pi.local:8080")),i={};s.onmessage=function(e){var t=JSON.parse(e.data);i[t.name]&&i[t.name].forEach((function(e){e(t.data)}))};var l={socket:s,on:function(e,t){i[e]=t[e]||[],i[e].push(t)}},u=r.a.createContext(l),m=function(e){var t=e.children;return r.a.createElement(u.Provider,{value:l},t)},p=a(26);a(33);var f=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],v=function(e){return{key:e,note:f[e%12],noteName:f[e%12].substr(0,1),oct:Math.ceil((e+1)/12),isSharp:[1,3,6,8,10].includes(e%12)}},d=[{label:"major",steps:[0,4,7]},{label:"minor",steps:[0,3,7]},{label:"dim",steps:[0,3,6],rootOnly:!0},{label:"aug",steps:[0,4,8],rootOnly:!0},{label:"7",steps:[0,4,7,10]},{label:"minor 7",steps:[0,3,7,10]},{label:"maj7",steps:[0,4,7,11]},{label:"minor maj7",steps:[0,3,7,11]}],h={};f.forEach((function(e,t){d.forEach((function(a){for(var n=0;n<a.steps.length;n++){for(var r=[],o=0;o<a.steps.length;o++)r.push(f[(t+a.steps[(n+o)%a.steps.length])%12]);if(h[r.join()]&&console.log("CLASH",a.label,h[r.join()].type),h[r.join()]={base:e,type:a.label},a.rootOnly)break}}))}));var y=function(e){var t=Array.from(new Set(e.map((function(e){return e%12})))).map((function(e){return f[e]})).join();return h[t]};function E(){var e=function(e,t){var a=Object(n.useState)(t),r=Object(p.a)(a,2),o=r[0],c=r[1];return Object(n.useContext)(u).on("state-".concat(e),(function(e){c(e)})),o}("keys",{}),t={},a=[],r=Object.keys(e).map((function(e){return t[~~e]=!0,a.push(~~e),v(~~e)})),o=y(a);return{keys:r,map:t,ids:a,chord:o}}var b=function(e){var t=e.pressed,a=e.start,n=e.octaves,o=e.showNotes;function c(e){return o?f[e%12]:"\u2b24"}for(var s=[],i=a;i<n;i++)for(var l=12*i;l<12*i+12;l++)l%12===0||l%12===5?s.push(r.a.createElement("div",{key:"group-".concat(l),className:"group"},r.a.createElement("div",{className:"anchor ".concat(t[l]?"active":"")},r.a.createElement("div",{className:"indicator"},c(l))))):(s.push(r.a.createElement("div",{key:"group-".concat(l),className:"group"},r.a.createElement("div",{className:"black ".concat(t[l]?"active":"")},r.a.createElement("div",{className:"indicator"},c(l))),r.a.createElement("div",{className:"anchor ".concat(t[l+1]?"active":"")},r.a.createElement("div",{className:"indicator"},c(l+1))))),l++);return r.a.createElement("div",{id:"piano-wrapper"},r.a.createElement("div",{id:"piano"},s))},g=a(25),k=a.n(g),w=(a(79),function(e){var t={3:{sym:",",form:String.prototype.toUpperCase},4:{sym:"",form:String.prototype.toUpperCase},5:{sym:"",form:String.prototype.toLowerCase},6:{sym:"'",form:String.prototype.toLowerCase}};return e.oct<3||e.oct>6?"":(e.isSharp?"^":"")+t[e.oct].form.call(e.noteName)+t[e.oct].sym});function j(e){var t=e.keys,a=Object(n.createRef)();return console.log(t),Object(n.useEffect)((function(){if(a.current){var e="M:C\n    ["+t.map(w).join("")+"]";k.a.renderAbc("vex",e,{})}}),[a]),r.a.createElement("div",{id:"vex",style:{justifyContent:"center",display:"inline-flex"},ref:a})}function N(){var e=E(),t=e.keys,a=e.map,n=e.chord;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chord"},r.a.createElement("h2",null,n&&r.a.createElement(r.a.Fragment,null,n.base," ",n.type))),r.a.createElement(b,{pressed:a,start:1,octaves:5,showNotes:!0}),r.a.createElement(j,{keys:t}))}var C=function(){return r.a.createElement(m,null,r.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.f74969e7.chunk.js.map